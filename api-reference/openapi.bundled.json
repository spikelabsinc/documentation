{
  "openapi": "3.1.0",
  "info": {
    "title": "Spike API",
    "description": "AI companion platform API - create personalities that see, listen, speak, remember, and play.",
    "version": "1.0.0",
    "contact": {
      "name": "Spike Labs",
      "email": "developers@spikelabsinc.com",
      "url": "https://www.spikelabs.com"
    },
    "license": {
      "name": "Proprietary",
      "url": "https://www.spikelabs.com/terms"
    }
  },
  "servers": [
    {
      "url": "https://api.spikelabs.com/v1",
      "description": "Production"
    },
    {
      "url": "https://api.spikelabs.com/v1-sandbox",
      "description": "Sandbox"
    }
  ],
  "tags": [
    {
      "name": "API Keys",
      "description": "Manage API keys for authentication",
      "x-displayName": "API Keys"
    },
    {
      "name": "Personalities",
      "description": "Define AI personality, voice, and appearance",
      "x-displayName": "Personalities"
    },
    {
      "name": "Users",
      "description": "Manage end users who interact with personalities",
      "x-displayName": "Users"
    },
    {
      "name": "Memories",
      "description": "User memories scoped per personality",
      "x-displayName": "Memories"
    },
    {
      "name": "Chat",
      "description": "Text-based chat completions",
      "x-displayName": "Chat"
    },
    {
      "name": "Voice",
      "description": "Speech synthesis and recognition",
      "x-displayName": "Voice"
    },
    {
      "name": "Video",
      "description": "Asynchronous video generation",
      "x-displayName": "Video"
    },
    {
      "name": "Image",
      "description": "Image generation and editing",
      "x-displayName": "Image"
    },
    {
      "name": "Knowledge",
      "description": "Personality knowledge base management",
      "x-displayName": "Knowledge"
    },
    {
      "name": "Conversations",
      "description": "Real-time WebRTC voice/video sessions",
      "x-displayName": "Conversations"
    },
    {
      "name": "Games",
      "description": "Turn-based games with personalities",
      "x-displayName": "Games"
    },
    {
      "name": "Integrations",
      "description": "Third-party integrations and webhooks",
      "x-displayName": "Integrations"
    },
    {
      "name": "Journey Marketplace",
      "description": "Browse and discover journeys",
      "x-displayName": "Journey Marketplace"
    },
    {
      "name": "User Journeys",
      "description": "User journey enrollment and progress",
      "x-displayName": "User Journeys"
    },
    {
      "name": "User Journey Steps",
      "description": "Step completion and responses",
      "x-displayName": "User Journey Steps"
    },
    {
      "name": "User Journey Deliverables",
      "description": "User-created content from journeys",
      "x-displayName": "User Journey Deliverables"
    },
    {
      "name": "Journeys",
      "description": "Journey template management",
      "x-displayName": "Journeys"
    },
    {
      "name": "Journey Steps",
      "description": "Step management within journeys",
      "x-displayName": "Journey Steps"
    },
    {
      "name": "Journey Blocks",
      "description": "Block management within steps",
      "x-displayName": "Journey Blocks"
    },
    {
      "name": "Journey Reaction Templates",
      "description": "Companion reaction prompt templates",
      "x-displayName": "Journey Reaction Templates"
    }
  ],
  "paths": {
    "/api-keys": {
      "get": {
        "operationId": "listApiKeys",
        "tags": [
          "API Keys"
        ],
        "summary": "List API keys",
        "description": "List all API keys for the authenticated organization. Secret keys are partially redacted.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of API keys",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_ApiKey"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Spike_API_Unauthorized"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "operationId": "createApiKey",
        "tags": [
          "API Keys"
        ],
        "summary": "Create API key",
        "description": "Create a new API key. The full secret is only returned once at creation time.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateApiKeyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "API key created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_ApiKeyWithSecret"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Spike_API_Unauthorized"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/api-keys/{key_id}": {
      "get": {
        "operationId": "getApiKey",
        "tags": [
          "API Keys"
        ],
        "summary": "Get API key",
        "description": "Retrieve details of a specific API key.",
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "API key ID (starts with `key_`)"
          }
        ],
        "responses": {
          "200": {
            "description": "API key details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_ApiKey"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "patch": {
        "operationId": "updateApiKey",
        "tags": [
          "API Keys"
        ],
        "summary": "Update API key",
        "description": "Update API key name or permissions.",
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_UpdateApiKeyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "API key updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_ApiKey"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteApiKey",
        "tags": [
          "API Keys"
        ],
        "summary": "Revoke API key",
        "description": "Permanently revoke an API key. This action cannot be undone.",
        "parameters": [
          {
            "name": "key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "API key revoked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/personalities": {
      "get": {
        "operationId": "listPersonalities",
        "tags": [
          "Personalities"
        ],
        "summary": "List personalities",
        "description": "List all personalities in the organization.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of personalities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_Personality"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Spike_API_Unauthorized"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "operationId": "createPersonality",
        "tags": [
          "Personalities"
        ],
        "summary": "Create personality",
        "description": "Create a new AI personality with voice, appearance, and behavioral traits.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreatePersonalityRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Personality created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Personality"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Spike_API_Unauthorized"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/personalities/{personality_id}": {
      "get": {
        "operationId": "getPersonality",
        "tags": [
          "Personalities"
        ],
        "summary": "Get personality",
        "description": "Retrieve a specific personality by ID.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Personality details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Personality"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "patch": {
        "operationId": "updatePersonality",
        "tags": [
          "Personalities"
        ],
        "summary": "Update personality",
        "description": "Update an existing personality. Only provided fields are updated.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_UpdatePersonalityRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Personality updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Personality"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deletePersonality",
        "tags": [
          "Personalities"
        ],
        "summary": "Delete personality",
        "description": "Delete a personality and all associated knowledge base data. Active conversations using this personality will be terminated.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Personality deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users": {
      "get": {
        "operationId": "listUsers",
        "tags": [
          "Users"
        ],
        "summary": "List users",
        "description": "List all users in the organization.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          },
          {
            "name": "external_id",
            "in": "query",
            "description": "Filter by external ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_User"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Spike_API_Unauthorized"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "operationId": "createUser",
        "tags": [
          "Users"
        ],
        "summary": "Create user",
        "description": "Create a new user. Users represent the people interacting with your AI personalities.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateUserRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_User"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "409": {
            "description": "User with this external_id already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}": {
      "get": {
        "operationId": "getUser",
        "tags": [
          "Users"
        ],
        "summary": "Get user",
        "description": "Retrieve a specific user by ID.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_User"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "patch": {
        "operationId": "updateUser",
        "tags": [
          "Users"
        ],
        "summary": "Update user",
        "description": "Update user metadata or settings.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_UpdateUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_User"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteUser",
        "tags": [
          "Users"
        ],
        "summary": "Delete user",
        "description": "Delete a user and all associated memories and integration connections. This action cannot be undone.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "User deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/external/{external_id}": {
      "get": {
        "operationId": "getUserByExternalId",
        "tags": [
          "Users"
        ],
        "summary": "Get user by external ID",
        "description": "Retrieve a user by your external identifier.",
        "parameters": [
          {
            "name": "external_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Your external user identifier"
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_User"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}/memories": {
      "get": {
        "operationId": "listMemories",
        "tags": [
          "Memories"
        ],
        "summary": "List memories",
        "description": "List all memories for a user, optionally filtered by personality.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          },
          {
            "name": "personality_id",
            "in": "query",
            "description": "Filter by personality",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "Filter by category",
            "schema": {
              "$ref": "#/components/schemas/Spike_API_MemoryCategory"
            }
          },
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of memories",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_Memory"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "operationId": "createMemory",
        "tags": [
          "Memories"
        ],
        "summary": "Create memory",
        "description": "Manually create a memory for a user-personality pair.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateMemoryRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Memory created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Memory"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteAllMemories",
        "tags": [
          "Memories"
        ],
        "summary": "Delete all memories",
        "description": "Delete all memories for a user, optionally filtered by personality.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          },
          {
            "name": "personality_id",
            "in": "query",
            "description": "Only delete memories for this personality",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memories deleted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "deleted_count"
                  ],
                  "properties": {
                    "deleted_count": {
                      "type": "integer",
                      "description": "Number of memories deleted"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}/memories/{memory_id}": {
      "get": {
        "operationId": "getMemory",
        "tags": [
          "Memories"
        ],
        "summary": "Get memory",
        "description": "Retrieve a specific memory.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_MemoryIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Memory details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Memory"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "patch": {
        "operationId": "updateMemory",
        "tags": [
          "Memories"
        ],
        "summary": "Update memory",
        "description": "Update a memory's content or category.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_MemoryIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_UpdateMemoryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memory updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Memory"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteMemory",
        "tags": [
          "Memories"
        ],
        "summary": "Delete memory",
        "description": "Delete a specific memory.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_MemoryIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Memory deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}/memories/search": {
      "post": {
        "operationId": "searchMemories",
        "tags": [
          "Memories"
        ],
        "summary": "Search memories",
        "description": "Semantic search across a user's memories.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "query"
                ],
                "properties": {
                  "query": {
                    "type": "string",
                    "description": "Search query"
                  },
                  "personality_id": {
                    "type": "string",
                    "description": "Filter by personality"
                  },
                  "limit": {
                    "type": "integer",
                    "default": 10,
                    "maximum": 100
                  },
                  "min_relevance": {
                    "type": "number",
                    "default": 0.7,
                    "minimum": 0,
                    "maximum": 1,
                    "description": "Minimum relevance score (0-1)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          {
                            "$ref": "#/components/schemas/Spike_API_Memory"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "relevance": {
                                "type": "number",
                                "description": "Relevance score (0-1)"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}/memories/bulk": {
      "post": {
        "operationId": "bulkCreateMemories",
        "tags": [
          "Memories"
        ],
        "summary": "Bulk create memories",
        "description": "Create multiple memories at once.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "personality_id",
                  "memories"
                ],
                "properties": {
                  "personality_id": {
                    "type": "string",
                    "description": "Personality to associate memories with"
                  },
                  "memories": {
                    "type": "array",
                    "maxItems": 100,
                    "items": {
                      "type": "object",
                      "required": [
                        "content"
                      ],
                      "properties": {
                        "content": {
                          "type": "string"
                        },
                        "category": {
                          "$ref": "#/components/schemas/Spike_API_MemoryCategory"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Memories created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "created_count",
                    "data"
                  ],
                  "properties": {
                    "created_count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_Memory"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/chat/completions": {
      "post": {
        "operationId": "createChatCompletion",
        "tags": [
          "Chat"
        ],
        "summary": "Create chat completion",
        "description": "Generate a chat response using a personality. Supports streaming via SSE.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_ChatCompletionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chat completion response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_ChatCompletionResponse"
                }
              },
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Server-sent events stream"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Spike_API_Unauthorized"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/voice/synthesize": {
      "post": {
        "operationId": "synthesizeSpeech",
        "tags": [
          "Voice"
        ],
        "summary": "Synthesize speech",
        "description": "Convert text to speech using a personality's voice configuration.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_SynthesizeSpeechRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Audio data",
            "content": {
              "audio/mpeg": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "audio/wav": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "audio/opus": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/voice/recognize": {
      "post": {
        "operationId": "recognizeSpeech",
        "tags": [
          "Voice"
        ],
        "summary": "Recognize speech",
        "description": "Convert speech audio to text.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "audio"
                ],
                "properties": {
                  "audio": {
                    "type": "string",
                    "format": "binary",
                    "description": "Audio file (mp3, wav, webm, ogg)"
                  },
                  "language": {
                    "type": "string",
                    "description": "Language code (e.g., 'en', 'es')",
                    "default": "en"
                  },
                  "prompt": {
                    "type": "string",
                    "description": "Optional context to improve recognition"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transcription result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_TranscriptionResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/video/generations": {
      "post": {
        "operationId": "createVideoGeneration",
        "tags": [
          "Video"
        ],
        "summary": "Create video generation",
        "description": "Generate a video of a personality speaking. This is an async operation - poll the returned ID for status.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateVideoRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Video generation started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_VideoGeneration"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "get": {
        "operationId": "listVideoGenerations",
        "tags": [
          "Video"
        ],
        "summary": "List video generations",
        "description": "List video generation jobs.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/Spike_API_VideoStatus"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of video generations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_VideoGeneration"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/video/generations/{generation_id}": {
      "get": {
        "operationId": "getVideoGeneration",
        "tags": [
          "Video"
        ],
        "summary": "Get video generation",
        "description": "Get the status and result of a video generation job.",
        "parameters": [
          {
            "name": "generation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Video generation details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_VideoGeneration"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "cancelVideoGeneration",
        "tags": [
          "Video"
        ],
        "summary": "Cancel video generation",
        "description": "Cancel a pending video generation job.",
        "parameters": [
          {
            "name": "generation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Video generation cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_VideoGeneration"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/image/generations": {
      "post": {
        "operationId": "createImageGeneration",
        "tags": [
          "Image"
        ],
        "summary": "Generate image",
        "description": "Generate an image from a text prompt.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateImageRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Generated image",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_ImageResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/image/edits": {
      "post": {
        "operationId": "createImageEdit",
        "tags": [
          "Image"
        ],
        "summary": "Edit image",
        "description": "Edit an existing image based on a prompt.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "image",
                  "prompt"
                ],
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "Source image to edit"
                  },
                  "mask": {
                    "type": "string",
                    "format": "binary",
                    "description": "Mask indicating areas to edit"
                  },
                  "prompt": {
                    "type": "string",
                    "description": "Description of the edit"
                  },
                  "size": {
                    "type": "string",
                    "enum": [
                      "256x256",
                      "512x512",
                      "1024x1024"
                    ],
                    "default": "1024x1024"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Edited image",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_ImageResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/personalities/{personality_id}/knowledge": {
      "get": {
        "operationId": "listKnowledgeItems",
        "tags": [
          "Knowledge"
        ],
        "summary": "List knowledge items",
        "description": "List all knowledge items for a personality.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/Spike_API_KnowledgeType"
            }
          },
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of knowledge items",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_KnowledgeItem"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "operationId": "createKnowledgeItem",
        "tags": [
          "Knowledge"
        ],
        "summary": "Add knowledge item",
        "description": "Add a document, URL, or text to a personality's knowledge base.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateKnowledgeRequest"
              }
            },
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Document file (PDF, TXT, MD, DOCX)"
                  },
                  "name": {
                    "type": "string",
                    "description": "Display name"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Knowledge item created (processing)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_KnowledgeItem"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/personalities/{personality_id}/knowledge/{item_id}": {
      "get": {
        "operationId": "getKnowledgeItem",
        "tags": [
          "Knowledge"
        ],
        "summary": "Get knowledge item",
        "description": "Get details of a knowledge item.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          },
          {
            "name": "item_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Knowledge item details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_KnowledgeItem"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteKnowledgeItem",
        "tags": [
          "Knowledge"
        ],
        "summary": "Delete knowledge item",
        "description": "Remove a knowledge item from a personality's knowledge base.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          },
          {
            "name": "item_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Knowledge item deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/personalities/{personality_id}/knowledge/search": {
      "post": {
        "operationId": "searchKnowledge",
        "tags": [
          "Knowledge"
        ],
        "summary": "Search knowledge",
        "description": "Semantic search across a personality's knowledge base.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_PersonalityIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "query"
                ],
                "properties": {
                  "query": {
                    "type": "string"
                  },
                  "limit": {
                    "type": "integer",
                    "default": 5,
                    "maximum": 20
                  },
                  "min_relevance": {
                    "type": "number",
                    "default": 0.7,
                    "minimum": 0,
                    "maximum": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_KnowledgeSearchResult"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/conversations": {
      "post": {
        "operationId": "createConversation",
        "tags": [
          "Conversations"
        ],
        "summary": "Create conversation",
        "description": "Start a new real-time conversation session. Returns connection details for WebRTC.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateConversationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Conversation created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Conversation"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "get": {
        "operationId": "listConversations",
        "tags": [
          "Conversations"
        ],
        "summary": "List conversations",
        "description": "List conversation sessions.",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "personality_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/Spike_API_ConversationStatus"
            }
          },
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of conversations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_Conversation"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/conversations/{conversation_id}": {
      "get": {
        "operationId": "getConversation",
        "tags": [
          "Conversations"
        ],
        "summary": "Get conversation",
        "description": "Get conversation details including transcript.",
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "include_transcript",
            "in": "query",
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversation details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Conversation"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "endConversation",
        "tags": [
          "Conversations"
        ],
        "summary": "End conversation",
        "description": "End an active conversation session.",
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversation ended",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Conversation"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/games": {
      "get": {
        "operationId": "listGames",
        "tags": [
          "Games"
        ],
        "summary": "List available games",
        "description": "List all games that personalities can play.",
        "responses": {
          "200": {
            "description": "List of games",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_GameDefinition"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/game-sessions": {
      "post": {
        "operationId": "createGameSession",
        "tags": [
          "Games"
        ],
        "summary": "Create game session",
        "description": "Start a new game session with a personality.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateGameSessionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Game session created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_GameSession"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "get": {
        "operationId": "listGameSessions",
        "tags": [
          "Games"
        ],
        "summary": "List game sessions",
        "description": "List game sessions.",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "game_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/Spike_API_GameSessionStatus"
            }
          },
          {
            "$ref": "#/components/parameters/Spike_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Spike_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of game sessions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_GameSession"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/game-sessions/{session_id}": {
      "get": {
        "operationId": "getGameSession",
        "tags": [
          "Games"
        ],
        "summary": "Get game session",
        "description": "Get game session details and state.",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Game session details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_GameSession"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/game-sessions/{session_id}/move": {
      "post": {
        "operationId": "submitGameMove",
        "tags": [
          "Games"
        ],
        "summary": "Submit move",
        "description": "Submit a move in a game session. Returns the personality's response move.",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_GameMoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Move result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_GameMoveResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/webhooks": {
      "get": {
        "operationId": "listWebhooks",
        "tags": [
          "Integrations"
        ],
        "summary": "List webhooks",
        "description": "List all webhook endpoints.",
        "responses": {
          "200": {
            "description": "List of webhooks",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_Webhook"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "post": {
        "operationId": "createWebhook",
        "tags": [
          "Integrations"
        ],
        "summary": "Create webhook",
        "description": "Register a new webhook endpoint.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_CreateWebhookRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Webhook created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Webhook"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Spike_API_BadRequest"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/webhooks/{webhook_id}": {
      "get": {
        "operationId": "getWebhook",
        "tags": [
          "Integrations"
        ],
        "summary": "Get webhook",
        "description": "Get webhook details.",
        "parameters": [
          {
            "name": "webhook_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Webhook details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Webhook"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "patch": {
        "operationId": "updateWebhook",
        "tags": [
          "Integrations"
        ],
        "summary": "Update webhook",
        "description": "Update webhook configuration.",
        "parameters": [
          {
            "name": "webhook_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spike_API_UpdateWebhookRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_Webhook"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      },
      "delete": {
        "operationId": "deleteWebhook",
        "tags": [
          "Integrations"
        ],
        "summary": "Delete webhook",
        "description": "Delete a webhook endpoint.",
        "parameters": [
          {
            "name": "webhook_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Webhook deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}/integrations": {
      "get": {
        "operationId": "listUserIntegrations",
        "tags": [
          "Integrations"
        ],
        "summary": "List user integrations",
        "description": "List connected third-party integrations for a user.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "List of integrations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Spike_API_UserIntegration"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/users/{user_id}/integrations/{provider}": {
      "delete": {
        "operationId": "disconnectIntegration",
        "tags": [
          "Integrations"
        ],
        "summary": "Disconnect integration",
        "description": "Disconnect a third-party integration for a user.",
        "parameters": [
          {
            "$ref": "#/components/parameters/Spike_API_UserIdParam"
          },
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "google",
                "spotify",
                "apple_music",
                "calendar"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Integration disconnected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spike_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Spike_API_NotFound"
          }
        },
        "security": [
          {
            "Spike_API_ApiKeyAuth": []
          }
        ]
      }
    },
    "/marketplace/journeys": {
      "get": {
        "tags": [
          "Journey Marketplace"
        ],
        "summary": "Browse available journeys",
        "description": "Returns published journeys available for enrollment",
        "operationId": "browseJourneys",
        "parameters": [
          {
            "$ref": "#/components/parameters/User_Journeys_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/User_Journeys_API_CursorParam"
          },
          {
            "name": "category",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/User_Journeys_API_JourneyCategory"
            }
          },
          {
            "name": "price_type",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/User_Journeys_API_PriceType"
            }
          },
          {
            "name": "duration",
            "in": "query",
            "description": "Filter by duration type",
            "schema": {
              "type": "string",
              "enum": [
                "short",
                "medium",
                "long",
                "ongoing"
              ]
            }
          },
          {
            "name": "sort",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "popular",
                "newest",
                "rating",
                "trending"
              ],
              "default": "popular"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of available journeys",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_JourneyListing"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/marketplace/journeys/featured": {
      "get": {
        "tags": [
          "Journey Marketplace"
        ],
        "summary": "Get featured journeys",
        "operationId": "getFeaturedJourneys",
        "responses": {
          "200": {
            "description": "Featured journeys",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_JourneyListing"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/marketplace/journeys/{journey_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_JourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Marketplace"
        ],
        "summary": "Get journey details",
        "description": "Returns full journey details for the listing page",
        "operationId": "getJourneyDetails",
        "responses": {
          "200": {
            "description": "Journey details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_JourneyDetail"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/User_Journeys_API_NotFound"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/marketplace/journeys/{journey_id}/preview": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_JourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Marketplace"
        ],
        "summary": "Preview journey steps",
        "description": "Returns a preview of the first few steps (no content, just titles)",
        "operationId": "previewJourneySteps",
        "responses": {
          "200": {
            "description": "Step preview",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "total_steps"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_StepPreview"
                      }
                    },
                    "total_steps": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys": {
      "get": {
        "tags": [
          "User Journeys"
        ],
        "summary": "List user's journeys",
        "description": "Returns all journeys the user is enrolled in or has completed",
        "operationId": "listUserJourneys",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/User_Journeys_API_UserJourneyStatus"
            }
          },
          {
            "$ref": "#/components/parameters/User_Journeys_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/User_Journeys_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "User's journeys",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/active": {
      "get": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Get active journeys",
        "description": "Returns only active (in-progress) journeys with current step info",
        "operationId": "getActiveJourneys",
        "responses": {
          "200": {
            "description": "Active journeys",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_UserJourneyActive"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/start": {
      "post": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Start a journey",
        "description": "Enrolls the user in a journey and unlocks the first step",
        "operationId": "startJourney",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "journey_id"
                ],
                "properties": {
                  "journey_id": {
                    "type": "string",
                    "description": "Journey ID (starts with `jrn_`)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Journey started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserJourneyStarted"
                }
              }
            }
          },
          "400": {
            "description": "Cannot start journey (already enrolled, insufficient currency, etc.)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_Error"
                }
              }
            }
          },
          "402": {
            "description": "Payment required (insufficient gems/coins)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_PaymentRequiredError"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Get user journey details",
        "description": "Returns full details of user's journey progress",
        "operationId": "getUserJourney",
        "parameters": [
          {
            "name": "include",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "steps",
                  "current_step",
                  "deliverables"
                ]
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User journey details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserJourneyDetail"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/User_Journeys_API_NotFound"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/pause": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Pause journey",
        "description": "Pauses the journey (stops streak tracking)",
        "operationId": "pauseJourney",
        "responses": {
          "200": {
            "description": "Journey paused",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/resume": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Resume journey",
        "description": "Resumes a paused journey",
        "operationId": "resumeJourney",
        "responses": {
          "200": {
            "description": "Journey resumed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserJourneyResumed"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/abandon": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Abandon journey",
        "description": "Abandons the journey (can be restarted later)",
        "operationId": "abandonJourney",
        "responses": {
          "200": {
            "description": "Journey abandoned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/catch-up": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Use catch-up",
        "description": "Uses a catch-up to preserve streak after missed day(s)",
        "operationId": "useCatchUp",
        "responses": {
          "200": {
            "description": "Catch-up used",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_CatchUpResult"
                }
              }
            }
          },
          "400": {
            "description": "No catch-ups remaining or not applicable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/rate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Rate completed journey",
        "description": "Submit rating for a completed journey",
        "operationId": "rateJourney",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "rating"
                ],
                "properties": {
                  "rating": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5
                  },
                  "feedback": {
                    "type": "string",
                    "maxLength": 1000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rating submitted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Journey not completed or already rated"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/steps": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "User Journey Steps"
        ],
        "summary": "List all steps with status",
        "description": "Returns all steps in the journey with user's completion status",
        "operationId": "listUserSteps",
        "responses": {
          "200": {
            "description": "Steps with status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_UserStepSummary"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/current-step": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "User Journey Steps"
        ],
        "summary": "Get current step",
        "description": "Returns the current step with full blocks ready for rendering",
        "operationId": "getCurrentStep",
        "responses": {
          "200": {
            "description": "Current step with blocks",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_CurrentStep"
                }
              }
            }
          },
          "404": {
            "description": "No current step (journey completed or paused)"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/steps/{user_step_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserStepIdParam"
        }
      ],
      "get": {
        "tags": [
          "User Journey Steps"
        ],
        "summary": "Get step details",
        "description": "Returns step details with user's responses (if completed)",
        "operationId": "getUserStep",
        "responses": {
          "200": {
            "description": "Step details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserStepDetail"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/User_Journeys_API_NotFound"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/steps/{user_step_id}/start": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserStepIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journey Steps"
        ],
        "summary": "Start step",
        "description": "Marks the step as started (for time tracking)",
        "operationId": "startStep",
        "responses": {
          "200": {
            "description": "Step started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserStepDetail"
                }
              }
            }
          },
          "400": {
            "description": "Step not available (locked, already completed)"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/steps/{user_step_id}/complete": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserStepIdParam"
        }
      ],
      "post": {
        "tags": [
          "User Journey Steps"
        ],
        "summary": "Complete step",
        "description": "Submits responses for the step and marks it complete.\nReturns companion reaction and unlocks next step.\n",
        "operationId": "completeStep",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User_Journeys_API_StepCompletionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Step completed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_StepCompletionResult"
                }
              }
            }
          },
          "400": {
            "description": "Invalid responses or step not available",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_ValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journeys/{user_journey_id}/steps/{user_step_id}/responses": {
      "parameters": [
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserJourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/User_Journeys_API_UserStepIdParam"
        }
      ],
      "get": {
        "tags": [
          "User Journey Steps"
        ],
        "summary": "Get step responses",
        "description": "Returns the user's responses for a completed step",
        "operationId": "getStepResponses",
        "responses": {
          "200": {
            "description": "Step responses",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_BlockResponse"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/deliverables": {
      "get": {
        "tags": [
          "User Journey Deliverables"
        ],
        "summary": "List user's deliverables",
        "description": "Returns all deliverables created across all journeys",
        "operationId": "listDeliverables",
        "parameters": [
          {
            "name": "journey_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "content_type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "text",
                "image",
                "audio"
              ]
            }
          },
          {
            "$ref": "#/components/parameters/User_Journeys_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/User_Journeys_API_CursorParam"
          }
        ],
        "responses": {
          "200": {
            "description": "User's deliverables",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User_Journeys_API_Deliverable"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/deliverables/{deliverable_id}": {
      "parameters": [
        {
          "name": "deliverable_id",
          "in": "path",
          "required": true,
          "description": "Deliverable ID (starts with `dlv_`)",
          "schema": {
            "type": "string"
          }
        }
      ],
      "get": {
        "tags": [
          "User Journey Deliverables"
        ],
        "summary": "Get deliverable",
        "operationId": "getDeliverable",
        "responses": {
          "200": {
            "description": "Deliverable details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_Deliverable"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/User_Journeys_API_NotFound"
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      },
      "patch": {
        "tags": [
          "User Journey Deliverables"
        ],
        "summary": "Update deliverable",
        "description": "Update title or visibility settings",
        "operationId": "updateDeliverable",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "is_public": {
                    "type": "boolean"
                  },
                  "is_pinned": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Deliverable updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_Deliverable"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      },
      "delete": {
        "tags": [
          "User Journey Deliverables"
        ],
        "summary": "Delete deliverable",
        "operationId": "deleteDeliverable",
        "responses": {
          "200": {
            "description": "Deliverable deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_DeletedObject"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/deliverables/{deliverable_id}/share": {
      "parameters": [
        {
          "name": "deliverable_id",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "post": {
        "tags": [
          "User Journey Deliverables"
        ],
        "summary": "Share deliverable",
        "description": "Generates a shareable link",
        "operationId": "shareDeliverable",
        "responses": {
          "200": {
            "description": "Share link generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "share_url": {
                      "type": "string",
                      "format": "uri"
                    },
                    "expires_at": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/user/journey-stats": {
      "get": {
        "tags": [
          "User Journeys"
        ],
        "summary": "Get journey statistics",
        "description": "Returns aggregate stats across all user journeys",
        "operationId": "getJourneyStats",
        "responses": {
          "200": {
            "description": "Journey statistics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserJourneyStats"
                }
              }
            }
          }
        },
        "security": [
          {
            "User_Journeys_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys": {
      "get": {
        "tags": [
          "Journeys"
        ],
        "summary": "List all journeys",
        "description": "Returns a paginated list of journey templates with optional filtering",
        "operationId": "listJourneys",
        "parameters": [
          {
            "$ref": "#/components/parameters/Journeys_Content_API_LimitParam"
          },
          {
            "$ref": "#/components/parameters/Journeys_Content_API_CursorParam"
          },
          {
            "name": "category",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/Journeys_Content_API_JourneyCategory"
            }
          },
          {
            "name": "price_type",
            "in": "query",
            "schema": {
              "$ref": "#/components/schemas/Journeys_Content_API_PriceType"
            }
          },
          {
            "name": "is_published",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "is_featured",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "search",
            "in": "query",
            "description": "Search by title or tagline",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of journeys",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data",
                    "has_more"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Journeys_Content_API_Journey"
                      }
                    },
                    "has_more": {
                      "type": "boolean"
                    },
                    "next_cursor": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Journeys_Content_API_Unauthorized"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "post": {
        "tags": [
          "Journeys"
        ],
        "summary": "Create a new journey",
        "operationId": "createJourney",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_JourneyCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Journey created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Journey"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Journeys_Content_API_BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Journeys_Content_API_Unauthorized"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journeys"
        ],
        "summary": "Get journey by ID",
        "operationId": "getJourney",
        "parameters": [
          {
            "name": "include",
            "in": "query",
            "description": "Include related resources",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "steps",
                  "steps.blocks",
                  "reaction_templates",
                  "stats"
                ]
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Journey details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_JourneyWithRelations"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Journeys"
        ],
        "summary": "Update journey",
        "operationId": "updateJourney",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_JourneyUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Journey updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Journey"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Journeys_Content_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Journeys"
        ],
        "summary": "Delete journey",
        "description": "Soft deletes the journey. Cannot delete if users have active instances.",
        "operationId": "deleteJourney",
        "responses": {
          "200": {
            "description": "Journey deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          },
          "409": {
            "description": "Cannot delete - journey has active users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/publish": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "Journeys"
        ],
        "summary": "Publish journey",
        "description": "Makes the journey available in the marketplace",
        "operationId": "publishJourney",
        "responses": {
          "200": {
            "description": "Journey published",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Journey"
                }
              }
            }
          },
          "400": {
            "description": "Journey not ready to publish (missing steps, etc.)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Error"
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/unpublish": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "Journeys"
        ],
        "summary": "Unpublish journey",
        "description": "Removes journey from marketplace. Active users can continue.",
        "operationId": "unpublishJourney",
        "responses": {
          "200": {
            "description": "Journey unpublished",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Journey"
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/duplicate": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "Journeys"
        ],
        "summary": "Duplicate journey",
        "description": "Creates a copy of the journey including all steps and blocks",
        "operationId": "duplicateJourney",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "description": "Title for the duplicated journey"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Journey duplicated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Journey"
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/steps": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Steps"
        ],
        "summary": "List steps in journey",
        "operationId": "listJourneySteps",
        "parameters": [
          {
            "name": "include",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "blocks"
                ]
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of steps",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Journeys_Content_API_Step"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "post": {
        "tags": [
          "Journey Steps"
        ],
        "summary": "Create a new step",
        "operationId": "createJourneyStep",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_StepCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Step created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Step"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Journeys_Content_API_BadRequest"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/steps/reorder": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "post": {
        "tags": [
          "Journey Steps"
        ],
        "summary": "Reorder steps",
        "description": "Updates the position of multiple steps at once",
        "operationId": "reorderJourneySteps",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "step_ids"
                ],
                "properties": {
                  "step_ids": {
                    "type": "array",
                    "description": "Step IDs in desired order",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Steps reordered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Journeys_Content_API_Step"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/steps/{step_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/Journeys_Content_API_StepIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Steps"
        ],
        "summary": "Get step by ID",
        "operationId": "getJourneyStep",
        "parameters": [
          {
            "name": "include",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "blocks"
                ]
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Step details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_StepWithBlocks"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Journey Steps"
        ],
        "summary": "Update step",
        "operationId": "updateJourneyStep",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_StepUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Step updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Step"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Journeys_Content_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Journey Steps"
        ],
        "summary": "Delete step",
        "operationId": "deleteJourneyStep",
        "responses": {
          "200": {
            "description": "Step deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/steps/{step_id}/blocks": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/Journeys_Content_API_StepIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Blocks"
        ],
        "summary": "List blocks in step",
        "operationId": "listJourneyBlocks",
        "responses": {
          "200": {
            "description": "List of blocks",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Journeys_Content_API_Block"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "post": {
        "tags": [
          "Journey Blocks"
        ],
        "summary": "Create a new block",
        "operationId": "createJourneyBlock",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_BlockCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Block created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Block"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Journeys_Content_API_BadRequest"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/steps/{step_id}/blocks/reorder": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/Journeys_Content_API_StepIdParam"
        }
      ],
      "post": {
        "tags": [
          "Journey Blocks"
        ],
        "summary": "Reorder blocks",
        "operationId": "reorderJourneyBlocks",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "block_ids"
                ],
                "properties": {
                  "block_ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Blocks reordered",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Journeys_Content_API_Block"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/steps/{step_id}/blocks/{block_id}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        },
        {
          "$ref": "#/components/parameters/Journeys_Content_API_StepIdParam"
        },
        {
          "$ref": "#/components/parameters/Journeys_Content_API_BlockIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Blocks"
        ],
        "summary": "Get block by ID",
        "operationId": "getJourneyBlock",
        "responses": {
          "200": {
            "description": "Block details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Block"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Journey Blocks"
        ],
        "summary": "Update block",
        "operationId": "updateJourneyBlock",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_BlockUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Block updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Block"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/Journeys_Content_API_BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Journey Blocks"
        ],
        "summary": "Delete block",
        "operationId": "deleteJourneyBlock",
        "responses": {
          "200": {
            "description": "Block deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/reaction-templates": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        }
      ],
      "get": {
        "tags": [
          "Journey Reaction Templates"
        ],
        "summary": "List reaction templates for journey",
        "operationId": "listReactionTemplates",
        "responses": {
          "200": {
            "description": "List of reaction templates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Journeys_Content_API_ReactionTemplate"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "post": {
        "tags": [
          "Journey Reaction Templates"
        ],
        "summary": "Create or update reaction template",
        "description": "Upserts a reaction template for the given mode",
        "operationId": "upsertReactionTemplate",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Journeys_Content_API_ReactionTemplateCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template created/updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_ReactionTemplate"
                }
              }
            }
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    },
    "/journeys/{journey_id}/reaction-templates/{mode}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/Journeys_Content_API_JourneyIdParam"
        },
        {
          "name": "mode",
          "in": "path",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/Journeys_Content_API_ReactionMode"
          }
        }
      ],
      "get": {
        "tags": [
          "Journey Reaction Templates"
        ],
        "summary": "Get reaction template by mode",
        "operationId": "getReactionTemplate",
        "responses": {
          "200": {
            "description": "Reaction template",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_ReactionTemplate"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Journey Reaction Templates"
        ],
        "summary": "Delete reaction template",
        "operationId": "deleteReactionTemplate",
        "responses": {
          "200": {
            "description": "Template deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Journeys_Content_API_DeletedObject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/Journeys_Content_API_NotFound"
          }
        },
        "security": [
          {
            "Journeys_Content_API_bearerAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "securitySchemes": {
      "Spike_API_ApiKeyAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "API key authentication. Use your secret key (starts with `sk_`) as a Bearer token."
      },
      "User_Journeys_API_bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token from Clerk authentication"
      },
      "Journeys_Content_API_bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token from Clerk authentication"
      }
    },
    "parameters": {
      "Spike_API_LimitParam": {
        "name": "limit",
        "in": "query",
        "description": "Number of items to return (1-100)",
        "schema": {
          "type": "integer",
          "default": 20,
          "minimum": 1,
          "maximum": 100
        }
      },
      "Spike_API_CursorParam": {
        "name": "cursor",
        "in": "query",
        "description": "Pagination cursor from previous response",
        "schema": {
          "type": "string"
        }
      },
      "Spike_API_PersonalityIdParam": {
        "name": "personality_id",
        "in": "path",
        "required": true,
        "description": "Personality ID (starts with `personality_`)",
        "schema": {
          "type": "string"
        }
      },
      "Spike_API_UserIdParam": {
        "name": "user_id",
        "in": "path",
        "required": true,
        "description": "User ID (starts with `user_`)",
        "schema": {
          "type": "string"
        }
      },
      "Spike_API_MemoryIdParam": {
        "name": "memory_id",
        "in": "path",
        "required": true,
        "description": "Memory ID (starts with `mem_`)",
        "schema": {
          "type": "string"
        }
      },
      "User_Journeys_API_JourneyIdParam": {
        "name": "journey_id",
        "in": "path",
        "required": true,
        "description": "Journey ID (starts with `jrn_`)",
        "schema": {
          "type": "string"
        }
      },
      "User_Journeys_API_UserJourneyIdParam": {
        "name": "user_journey_id",
        "in": "path",
        "required": true,
        "description": "User journey ID (starts with `ujrn_`)",
        "schema": {
          "type": "string"
        }
      },
      "User_Journeys_API_UserStepIdParam": {
        "name": "user_step_id",
        "in": "path",
        "required": true,
        "description": "User step ID (starts with `ustp_`)",
        "schema": {
          "type": "string"
        }
      },
      "User_Journeys_API_LimitParam": {
        "name": "limit",
        "in": "query",
        "description": "Number of items to return (1-100)",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 20
        }
      },
      "User_Journeys_API_CursorParam": {
        "name": "cursor",
        "in": "query",
        "description": "Cursor for pagination",
        "schema": {
          "type": "string"
        }
      },
      "Journeys_Content_API_JourneyIdParam": {
        "name": "journey_id",
        "in": "path",
        "required": true,
        "description": "Journey ID (starts with `jrn_`)",
        "schema": {
          "type": "string"
        }
      },
      "Journeys_Content_API_StepIdParam": {
        "name": "step_id",
        "in": "path",
        "required": true,
        "description": "Step ID (starts with `stp_`)",
        "schema": {
          "type": "string"
        }
      },
      "Journeys_Content_API_BlockIdParam": {
        "name": "block_id",
        "in": "path",
        "required": true,
        "description": "Block ID (starts with `blk_`)",
        "schema": {
          "type": "string"
        }
      },
      "Journeys_Content_API_LimitParam": {
        "name": "limit",
        "in": "query",
        "description": "Number of items to return (1-100)",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 20
        }
      },
      "Journeys_Content_API_CursorParam": {
        "name": "cursor",
        "in": "query",
        "description": "Cursor for pagination",
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "Spike_API_ApiKey": {
        "type": "object",
        "required": [
          "id",
          "object",
          "name",
          "key_prefix",
          "scopes",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier",
            "example": "key_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "api_key"
            ]
          },
          "name": {
            "type": "string",
            "description": "Display name for the key",
            "example": "Production API Key"
          },
          "key_prefix": {
            "type": "string",
            "description": "First 8 characters of the key for identification",
            "example": "sk_live_"
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "*",
                "read",
                "write",
                "conversations",
                "chat",
                "voice",
                "video"
              ]
            },
            "description": "Permissions granted to this key"
          },
          "last_used_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Spike_API_Error": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "type": "object",
            "required": [
              "code",
              "message"
            ],
            "properties": {
              "code": {
                "type": "string",
                "description": "Error code",
                "example": "invalid_request"
              },
              "message": {
                "type": "string",
                "description": "Human-readable error message"
              },
              "param": {
                "type": "string",
                "description": "Parameter that caused the error",
                "nullable": true
              }
            }
          }
        }
      },
      "Spike_API_CreateApiKeyRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Display name for the key",
            "maxLength": 100
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "*",
                "read",
                "write",
                "conversations",
                "chat",
                "voice",
                "video"
              ]
            },
            "default": [
              "*"
            ],
            "description": "Permissions to grant"
          }
        }
      },
      "Spike_API_ApiKeyWithSecret": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Spike_API_ApiKey"
          },
          {
            "type": "object",
            "required": [
              "secret"
            ],
            "properties": {
              "secret": {
                "type": "string",
                "description": "The full secret key. Only returned at creation time.",
                "example": "sk_live_abc123xyz789..."
              }
            }
          }
        ]
      },
      "Spike_API_DeletedObject": {
        "type": "object",
        "required": [
          "id",
          "object",
          "deleted"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "object": {
            "type": "string"
          },
          "deleted": {
            "type": "boolean",
            "enum": [
              true
            ]
          }
        }
      },
      "Spike_API_UpdateApiKeyRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "*",
                "read",
                "write",
                "conversations",
                "chat",
                "voice",
                "video"
              ]
            }
          }
        }
      },
      "Spike_API_VoiceConfig": {
        "type": "object",
        "nullable": true,
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "elevenlabs",
              "cartesia",
              "azure",
              "openai"
            ],
            "description": "TTS provider"
          },
          "voice_id": {
            "type": "string",
            "description": "Provider-specific voice identifier"
          },
          "settings": {
            "type": "object",
            "properties": {
              "stability": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              },
              "similarity_boost": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              },
              "speed": {
                "type": "number",
                "minimum": 0.5,
                "maximum": 2
              }
            }
          }
        }
      },
      "Spike_API_AppearanceConfig": {
        "type": "object",
        "nullable": true,
        "properties": {
          "avatar_id": {
            "type": "string",
            "description": "Avatar/replica identifier"
          },
          "style": {
            "type": "string",
            "enum": [
              "realistic",
              "stylized",
              "animated"
            ],
            "default": "realistic"
          },
          "background": {
            "type": "string",
            "description": "Background setting: 'transparent', 'blur', or URL"
          }
        }
      },
      "Spike_API_PersonalityTraits": {
        "type": "object",
        "nullable": true,
        "description": "Behavioral trait sliders (0-1)",
        "properties": {
          "warmth": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "How warm and friendly"
          },
          "humor": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "How playful and humorous"
          },
          "formality": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "How formal vs casual"
          },
          "verbosity": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "How detailed in responses"
          },
          "empathy": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "How emotionally responsive"
          }
        }
      },
      "Spike_API_Personality": {
        "type": "object",
        "required": [
          "id",
          "object",
          "name",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier",
            "example": "personality_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "personality"
            ]
          },
          "name": {
            "type": "string",
            "description": "Display name",
            "example": "Luv"
          },
          "description": {
            "type": "string",
            "nullable": true,
            "description": "Brief description of the personality"
          },
          "system_prompt": {
            "type": "string",
            "nullable": true,
            "description": "System prompt that defines behavior"
          },
          "voice": {
            "$ref": "#/components/schemas/Spike_API_VoiceConfig"
          },
          "appearance": {
            "$ref": "#/components/schemas/Spike_API_AppearanceConfig"
          },
          "traits": {
            "$ref": "#/components/schemas/Spike_API_PersonalityTraits"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Custom key-value metadata"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Spike_API_CreatePersonalityRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "maxLength": 500
          },
          "system_prompt": {
            "type": "string",
            "maxLength": 10000
          },
          "voice": {
            "$ref": "#/components/schemas/Spike_API_VoiceConfig"
          },
          "appearance": {
            "$ref": "#/components/schemas/Spike_API_AppearanceConfig"
          },
          "traits": {
            "$ref": "#/components/schemas/Spike_API_PersonalityTraits"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "Spike_API_UpdatePersonalityRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "maxLength": 500
          },
          "system_prompt": {
            "type": "string",
            "maxLength": 10000
          },
          "voice": {
            "$ref": "#/components/schemas/Spike_API_VoiceConfig"
          },
          "appearance": {
            "$ref": "#/components/schemas/Spike_API_AppearanceConfig"
          },
          "traits": {
            "$ref": "#/components/schemas/Spike_API_PersonalityTraits"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "Spike_API_User": {
        "type": "object",
        "required": [
          "id",
          "object",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier",
            "example": "user_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "user"
            ]
          },
          "external_id": {
            "type": "string",
            "nullable": true,
            "description": "Your external user identifier"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Custom user data (name, email, etc.)"
          },
          "settings": {
            "type": "object",
            "properties": {
              "memory_enabled": {
                "type": "boolean",
                "default": true,
                "description": "Whether to auto-create memories"
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Spike_API_CreateUserRequest": {
        "type": "object",
        "properties": {
          "external_id": {
            "type": "string",
            "maxLength": 255,
            "description": "Your external user identifier"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          },
          "settings": {
            "type": "object",
            "properties": {
              "memory_enabled": {
                "type": "boolean",
                "default": true
              }
            }
          }
        }
      },
      "Spike_API_UpdateUserRequest": {
        "type": "object",
        "properties": {
          "external_id": {
            "type": "string",
            "maxLength": 255
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          },
          "settings": {
            "type": "object",
            "properties": {
              "memory_enabled": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "Spike_API_MemoryCategory": {
        "type": "string",
        "enum": [
          "personal",
          "location",
          "preference",
          "relationship",
          "schedule",
          "context",
          "custom"
        ],
        "description": "Category of memory"
      },
      "Spike_API_Memory": {
        "type": "object",
        "required": [
          "id",
          "object",
          "user_id",
          "personality_id",
          "content",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier",
            "example": "mem_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "memory"
            ]
          },
          "user_id": {
            "type": "string",
            "description": "User this memory belongs to"
          },
          "personality_id": {
            "type": "string",
            "description": "Personality this memory is scoped to"
          },
          "content": {
            "type": "string",
            "description": "The memory content"
          },
          "category": {
            "$ref": "#/components/schemas/Spike_API_MemoryCategory"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence score (1.0 for manually created)"
          },
          "source": {
            "type": "object",
            "nullable": true,
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "conversation",
                  "manual",
                  "import"
                ]
              },
              "conversation_id": {
                "type": "string",
                "nullable": true
              },
              "extracted_from": {
                "type": "string",
                "nullable": true,
                "description": "Original text this was extracted from"
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "last_used_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Last time this memory was retrieved in a conversation"
          }
        }
      },
      "Spike_API_CreateMemoryRequest": {
        "type": "object",
        "required": [
          "personality_id",
          "content"
        ],
        "properties": {
          "personality_id": {
            "type": "string",
            "description": "Personality to associate this memory with"
          },
          "content": {
            "type": "string",
            "maxLength": 2000,
            "description": "The memory content"
          },
          "category": {
            "$ref": "#/components/schemas/Spike_API_MemoryCategory"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "Spike_API_UpdateMemoryRequest": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "maxLength": 2000
          },
          "category": {
            "$ref": "#/components/schemas/Spike_API_MemoryCategory"
          }
        }
      },
      "Spike_API_ChatMessage": {
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "system",
              "user",
              "assistant"
            ]
          },
          "content": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "description": "Optional name for the message author"
          }
        }
      },
      "Spike_API_ChatCompletionRequest": {
        "type": "object",
        "required": [
          "personality_id",
          "messages"
        ],
        "properties": {
          "personality_id": {
            "type": "string",
            "description": "Personality to use for the response"
          },
          "user_id": {
            "type": "string",
            "description": "User for memory context (optional)"
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Spike_API_ChatMessage"
            }
          },
          "stream": {
            "type": "boolean",
            "default": false,
            "description": "Stream response via SSE"
          },
          "temperature": {
            "type": "number",
            "minimum": 0,
            "maximum": 2,
            "default": 0.7
          },
          "max_tokens": {
            "type": "integer",
            "minimum": 1,
            "maximum": 4096,
            "default": 1024
          },
          "include_memories": {
            "type": "boolean",
            "default": true,
            "description": "Include relevant user memories in context"
          },
          "include_knowledge": {
            "type": "boolean",
            "default": true,
            "description": "Include relevant knowledge base content"
          }
        }
      },
      "Spike_API_ChatCompletionResponse": {
        "type": "object",
        "required": [
          "id",
          "object",
          "created",
          "choices"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "chat_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "chat.completion"
            ]
          },
          "created": {
            "type": "integer",
            "description": "Unix timestamp"
          },
          "personality_id": {
            "type": "string"
          },
          "choices": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "index",
                "message",
                "finish_reason"
              ],
              "properties": {
                "index": {
                  "type": "integer"
                },
                "message": {
                  "$ref": "#/components/schemas/Spike_API_ChatMessage"
                },
                "finish_reason": {
                  "type": "string",
                  "enum": [
                    "stop",
                    "length",
                    "content_filter"
                  ]
                }
              }
            }
          },
          "usage": {
            "type": "object",
            "properties": {
              "prompt_tokens": {
                "type": "integer"
              },
              "completion_tokens": {
                "type": "integer"
              },
              "total_tokens": {
                "type": "integer"
              }
            }
          },
          "memories_used": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs of memories included in context"
          }
        }
      },
      "Spike_API_SynthesizeSpeechRequest": {
        "type": "object",
        "required": [
          "personality_id",
          "text"
        ],
        "properties": {
          "personality_id": {
            "type": "string",
            "description": "Personality whose voice to use"
          },
          "text": {
            "type": "string",
            "maxLength": 5000,
            "description": "Text to synthesize"
          },
          "format": {
            "type": "string",
            "enum": [
              "mp3",
              "wav",
              "opus"
            ],
            "default": "mp3"
          },
          "speed": {
            "type": "number",
            "minimum": 0.5,
            "maximum": 2,
            "default": 1
          },
          "emotion": {
            "type": "string",
            "enum": [
              "neutral",
              "happy",
              "sad",
              "excited",
              "calm"
            ],
            "default": "neutral"
          }
        }
      },
      "Spike_API_TranscriptionResponse": {
        "type": "object",
        "required": [
          "text"
        ],
        "properties": {
          "text": {
            "type": "string",
            "description": "Transcribed text"
          },
          "language": {
            "type": "string",
            "description": "Detected language code"
          },
          "duration": {
            "type": "number",
            "description": "Audio duration in seconds"
          },
          "words": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "word": {
                  "type": "string"
                },
                "start": {
                  "type": "number"
                },
                "end": {
                  "type": "number"
                },
                "confidence": {
                  "type": "number"
                }
              }
            }
          }
        }
      },
      "Spike_API_VideoStatus": {
        "type": "string",
        "enum": [
          "pending",
          "processing",
          "completed",
          "failed",
          "cancelled"
        ]
      },
      "Spike_API_VideoGeneration": {
        "type": "object",
        "required": [
          "id",
          "object",
          "status",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "vid_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "video.generation"
            ]
          },
          "personality_id": {
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/Spike_API_VideoStatus"
          },
          "progress": {
            "type": "integer",
            "minimum": 0,
            "maximum": 100,
            "description": "Progress percentage"
          },
          "video_url": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "description": "URL of completed video"
          },
          "thumbnail_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "duration": {
            "type": "number",
            "nullable": true,
            "description": "Video duration in seconds"
          },
          "error": {
            "type": "object",
            "nullable": true,
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "completed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "Spike_API_CreateVideoRequest": {
        "type": "object",
        "required": [
          "personality_id"
        ],
        "properties": {
          "personality_id": {
            "type": "string"
          },
          "text": {
            "type": "string",
            "maxLength": 5000,
            "description": "Text for the avatar to speak"
          },
          "audio_url": {
            "type": "string",
            "format": "uri",
            "description": "URL of audio file to lip-sync (alternative to text)"
          },
          "duration": {
            "type": "integer",
            "minimum": 1,
            "maximum": 300,
            "description": "Max duration in seconds"
          },
          "resolution": {
            "type": "string",
            "enum": [
              "480p",
              "720p",
              "1080p"
            ],
            "default": "720p"
          },
          "background": {
            "type": "string",
            "description": "Background: 'transparent', 'blur', or image URL"
          },
          "webhook_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to notify when complete"
          }
        }
      },
      "Spike_API_CreateImageRequest": {
        "type": "object",
        "required": [
          "prompt"
        ],
        "properties": {
          "prompt": {
            "type": "string",
            "maxLength": 4000
          },
          "size": {
            "type": "string",
            "enum": [
              "256x256",
              "512x512",
              "1024x1024",
              "1024x1792",
              "1792x1024"
            ],
            "default": "1024x1024"
          },
          "quality": {
            "type": "string",
            "enum": [
              "standard",
              "hd"
            ],
            "default": "standard"
          },
          "style": {
            "type": "string",
            "enum": [
              "natural",
              "vivid"
            ],
            "default": "natural"
          },
          "n": {
            "type": "integer",
            "minimum": 1,
            "maximum": 4,
            "default": 1,
            "description": "Number of images to generate"
          }
        }
      },
      "Spike_API_ImageResponse": {
        "type": "object",
        "required": [
          "created",
          "data"
        ],
        "properties": {
          "created": {
            "type": "integer",
            "description": "Unix timestamp"
          },
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "url": {
                  "type": "string",
                  "format": "uri"
                },
                "b64_json": {
                  "type": "string",
                  "description": "Base64 encoded image"
                },
                "revised_prompt": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "Spike_API_KnowledgeType": {
        "type": "string",
        "enum": [
          "document",
          "url",
          "text",
          "feed"
        ]
      },
      "Spike_API_KnowledgeStatus": {
        "type": "string",
        "enum": [
          "pending",
          "processing",
          "ready",
          "failed"
        ]
      },
      "Spike_API_KnowledgeItem": {
        "type": "object",
        "required": [
          "id",
          "object",
          "type",
          "status",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "kb_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "knowledge_item"
            ]
          },
          "name": {
            "type": "string"
          },
          "type": {
            "$ref": "#/components/schemas/Spike_API_KnowledgeType"
          },
          "status": {
            "$ref": "#/components/schemas/Spike_API_KnowledgeStatus"
          },
          "source_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "content_preview": {
            "type": "string",
            "nullable": true,
            "description": "First 500 characters"
          },
          "chunk_count": {
            "type": "integer",
            "description": "Number of indexed chunks"
          },
          "token_count": {
            "type": "integer",
            "description": "Total tokens"
          },
          "error": {
            "type": "object",
            "nullable": true,
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Spike_API_CreateKnowledgeRequest": {
        "type": "object",
        "properties": {
          "type": {
            "$ref": "#/components/schemas/Spike_API_KnowledgeType"
          },
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "URL to fetch (for url/feed types)"
          },
          "content": {
            "type": "string",
            "maxLength": 100000,
            "description": "Text content (for text type)"
          },
          "refresh_interval": {
            "type": "string",
            "enum": [
              "hourly",
              "daily",
              "weekly",
              "never"
            ],
            "default": "never",
            "description": "Auto-refresh for URL/feed types"
          }
        }
      },
      "Spike_API_KnowledgeSearchResult": {
        "type": "object",
        "required": [
          "item_id",
          "chunk",
          "relevance"
        ],
        "properties": {
          "item_id": {
            "type": "string"
          },
          "item_name": {
            "type": "string"
          },
          "chunk": {
            "type": "string",
            "description": "Matching text chunk"
          },
          "relevance": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        }
      },
      "Spike_API_ConversationStatus": {
        "type": "string",
        "enum": [
          "connecting",
          "active",
          "ended",
          "failed"
        ]
      },
      "Spike_API_ConversationMode": {
        "type": "string",
        "enum": [
          "voice",
          "video",
          "voice_video"
        ]
      },
      "Spike_API_Conversation": {
        "type": "object",
        "required": [
          "id",
          "object",
          "personality_id",
          "status",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "conv_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "conversation"
            ]
          },
          "personality_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/Spike_API_ConversationStatus"
          },
          "mode": {
            "$ref": "#/components/schemas/Spike_API_ConversationMode"
          },
          "room_url": {
            "type": "string",
            "format": "uri",
            "description": "WebRTC room URL"
          },
          "room_token": {
            "type": "string",
            "description": "Token to join the room"
          },
          "duration": {
            "type": "integer",
            "description": "Duration in seconds",
            "nullable": true
          },
          "transcript": {
            "type": "array",
            "nullable": true,
            "items": {
              "type": "object",
              "properties": {
                "role": {
                  "type": "string",
                  "enum": [
                    "user",
                    "assistant"
                  ]
                },
                "content": {
                  "type": "string"
                },
                "timestamp": {
                  "type": "number"
                }
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "ended_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "Spike_API_CreateConversationRequest": {
        "type": "object",
        "required": [
          "personality_id"
        ],
        "properties": {
          "personality_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "mode": {
            "$ref": "#/components/schemas/Spike_API_ConversationMode"
          },
          "initial_message": {
            "type": "string",
            "description": "Optional greeting from the personality"
          },
          "config": {
            "type": "object",
            "properties": {
              "video_enabled": {
                "type": "boolean",
                "default": true
              },
              "audio_enabled": {
                "type": "boolean",
                "default": true
              },
              "vad_enabled": {
                "type": "boolean",
                "default": true,
                "description": "Voice activity detection"
              },
              "interruption_enabled": {
                "type": "boolean",
                "default": true,
                "description": "Allow user to interrupt AI"
              }
            }
          }
        }
      },
      "Spike_API_GameDefinition": {
        "type": "object",
        "required": [
          "id",
          "name",
          "type"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "game_tictactoe"
          },
          "name": {
            "type": "string",
            "example": "Tic Tac Toe"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "turn_based",
              "real_time"
            ]
          },
          "min_players": {
            "type": "integer"
          },
          "max_players": {
            "type": "integer"
          },
          "rules": {
            "type": "string",
            "description": "Game rules in markdown"
          }
        }
      },
      "Spike_API_GameSessionStatus": {
        "type": "string",
        "enum": [
          "waiting",
          "active",
          "completed",
          "abandoned"
        ]
      },
      "Spike_API_GameSession": {
        "type": "object",
        "required": [
          "id",
          "object",
          "game_id",
          "personality_id",
          "status",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "gs_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "game_session"
            ]
          },
          "game_id": {
            "type": "string"
          },
          "personality_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/Spike_API_GameSessionStatus"
          },
          "current_turn": {
            "type": "string",
            "enum": [
              "user",
              "personality"
            ]
          },
          "state": {
            "type": "object",
            "additionalProperties": true,
            "description": "Game-specific state"
          },
          "winner": {
            "type": "string",
            "enum": [
              "user",
              "personality",
              "draw"
            ],
            "nullable": true
          },
          "move_count": {
            "type": "integer"
          },
          "personality_commentary": {
            "type": "string",
            "nullable": true,
            "description": "Personality's latest comment"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Spike_API_CreateGameSessionRequest": {
        "type": "object",
        "required": [
          "game_id",
          "personality_id"
        ],
        "properties": {
          "game_id": {
            "type": "string"
          },
          "personality_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "difficulty": {
            "type": "string",
            "enum": [
              "easy",
              "medium",
              "hard"
            ],
            "default": "medium"
          },
          "user_goes_first": {
            "type": "boolean",
            "default": true
          }
        }
      },
      "Spike_API_GameMoveRequest": {
        "type": "object",
        "required": [
          "move"
        ],
        "properties": {
          "move": {
            "type": "object",
            "additionalProperties": true,
            "description": "Game-specific move data"
          },
          "message": {
            "type": "string",
            "description": "Optional message to the personality"
          }
        }
      },
      "Spike_API_GameMoveResponse": {
        "type": "object",
        "required": [
          "session",
          "user_move_valid"
        ],
        "properties": {
          "session": {
            "$ref": "#/components/schemas/Spike_API_GameSession"
          },
          "user_move_valid": {
            "type": "boolean"
          },
          "user_move_error": {
            "type": "string",
            "nullable": true
          },
          "personality_move": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "personality_message": {
            "type": "string",
            "nullable": true,
            "description": "Personality's response/commentary"
          }
        }
      },
      "Spike_API_WebhookEvent": {
        "type": "string",
        "enum": [
          "conversation.started",
          "conversation.ended",
          "video.completed",
          "video.failed",
          "knowledge.processed",
          "memory.created"
        ]
      },
      "Spike_API_Webhook": {
        "type": "object",
        "required": [
          "id",
          "object",
          "url",
          "events",
          "created_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "wh_abc123"
          },
          "object": {
            "type": "string",
            "enum": [
              "webhook"
            ]
          },
          "url": {
            "type": "string",
            "format": "uri"
          },
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Spike_API_WebhookEvent"
            }
          },
          "secret": {
            "type": "string",
            "description": "Signing secret (only on create)"
          },
          "enabled": {
            "type": "boolean",
            "default": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Spike_API_CreateWebhookRequest": {
        "type": "object",
        "required": [
          "url",
          "events"
        ],
        "properties": {
          "url": {
            "type": "string",
            "format": "uri"
          },
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Spike_API_WebhookEvent"
            }
          }
        }
      },
      "Spike_API_UpdateWebhookRequest": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "format": "uri"
          },
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Spike_API_WebhookEvent"
            }
          },
          "enabled": {
            "type": "boolean"
          }
        }
      },
      "Spike_API_UserIntegration": {
        "type": "object",
        "required": [
          "provider",
          "status",
          "connected_at"
        ],
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "google",
              "spotify",
              "apple_music",
              "calendar"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "connected",
              "expired",
              "error"
            ]
          },
          "scopes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "connected_at": {
            "type": "string",
            "format": "date-time"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "User_Journeys_API_JourneyCategory": {
        "type": "string",
        "enum": [
          "emotional",
          "fitness",
          "education",
          "professional",
          "fun",
          "habit"
        ]
      },
      "User_Journeys_API_PriceType": {
        "type": "string",
        "enum": [
          "free",
          "coins",
          "gems",
          "premium"
        ]
      },
      "User_Journeys_API_UserJourneyStatus": {
        "type": "string",
        "enum": [
          "active",
          "paused",
          "completed",
          "abandoned"
        ]
      },
      "User_Journeys_API_UserStepStatus": {
        "type": "string",
        "enum": [
          "locked",
          "available",
          "in_progress",
          "completed",
          "skipped"
        ]
      },
      "User_Journeys_API_BlockType": {
        "type": "string",
        "enum": [
          "companion_message",
          "instruction",
          "narrative",
          "text_input",
          "voice_input",
          "single_select",
          "multi_select",
          "scale",
          "binary",
          "counter",
          "timer",
          "checklist",
          "media_upload",
          "external_confirm"
        ]
      },
      "User_Journeys_API_JourneyListing": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Journey ID (starts with `jrn_`)"
          },
          "title": {
            "type": "string"
          },
          "tagline": {
            "type": "string"
          },
          "category": {
            "$ref": "#/components/schemas/User_Journeys_API_JourneyCategory"
          },
          "duration_display": {
            "type": "string"
          },
          "frequency": {
            "type": "string"
          },
          "session_minutes": {
            "type": "integer"
          },
          "price_type": {
            "$ref": "#/components/schemas/User_Journeys_API_PriceType"
          },
          "price_amount": {
            "type": "integer",
            "nullable": true
          },
          "cover_image_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "color_gradient": {
            "type": "string"
          },
          "completion_count": {
            "type": "integer"
          },
          "active_user_count": {
            "type": "integer"
          },
          "avg_rating": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "is_featured": {
            "type": "boolean"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "User_Journeys_API_JourneyDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/User_Journeys_API_JourneyListing"
          },
          {
            "type": "object",
            "properties": {
              "description": {
                "type": "string"
              },
              "total_steps": {
                "type": "integer"
              },
              "companion_role": {
                "type": "string"
              },
              "streak_sensitivity": {
                "type": "string"
              },
              "catch_up_days": {
                "type": "integer",
                "nullable": true
              },
              "outcomes": {
                "type": "array",
                "description": "What you'll achieve",
                "items": {
                  "type": "string"
                }
              },
              "user_enrollment": {
                "description": "User's enrollment status (if authenticated)",
                "nullable": true,
                "$ref": "#/components/schemas/User_Journeys_API_UserEnrollmentStatus"
              }
            }
          }
        ]
      },
      "User_Journeys_API_UserEnrollmentStatus": {
        "type": "object",
        "properties": {
          "is_enrolled": {
            "type": "boolean"
          },
          "user_journey_id": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/User_Journeys_API_UserJourneyStatus"
          },
          "progress": {
            "type": "number",
            "format": "float",
            "description": "Completion percentage (0-100)"
          }
        }
      },
      "User_Journeys_API_StepPreview": {
        "type": "object",
        "properties": {
          "position": {
            "type": "integer"
          },
          "day_number": {
            "type": "integer",
            "nullable": true
          },
          "title": {
            "type": "string"
          },
          "is_milestone": {
            "type": "boolean"
          }
        }
      },
      "User_Journeys_API_UserJourney": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User journey ID (starts with `ujrn_`)"
          },
          "journey_id": {
            "type": "string"
          },
          "journey": {
            "$ref": "#/components/schemas/User_Journeys_API_JourneyListing"
          },
          "status": {
            "$ref": "#/components/schemas/User_Journeys_API_UserJourneyStatus"
          },
          "current_step_position": {
            "type": "integer"
          },
          "completed_steps_count": {
            "type": "integer"
          },
          "total_steps": {
            "type": "integer"
          },
          "progress": {
            "type": "number",
            "format": "float",
            "description": "Completion percentage (0-100)"
          },
          "current_streak": {
            "type": "integer"
          },
          "longest_streak": {
            "type": "integer"
          },
          "catch_ups_remaining": {
            "type": "integer",
            "nullable": true
          },
          "catch_ups_used": {
            "type": "integer"
          },
          "last_activity_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "streak_expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "next_step_available_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "started_at": {
            "type": "string",
            "format": "date-time"
          },
          "completed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "user_rating": {
            "type": "integer",
            "nullable": true
          }
        }
      },
      "User_Journeys_API_UserJourneyActive": {
        "allOf": [
          {
            "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
          },
          {
            "type": "object",
            "properties": {
              "current_step": {
                "$ref": "#/components/schemas/User_Journeys_API_UserStepSummary"
              },
              "streak_status": {
                "type": "string",
                "enum": [
                  "safe",
                  "at_risk",
                  "broken"
                ]
              },
              "hours_until_streak_expires": {
                "type": "integer",
                "nullable": true
              }
            }
          }
        ]
      },
      "User_Journeys_API_UserJourneyDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
          },
          {
            "type": "object",
            "properties": {
              "steps": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/User_Journeys_API_UserStepSummary"
                }
              },
              "deliverables": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/User_Journeys_API_DeliverableSummary"
                }
              },
              "rewards": {
                "$ref": "#/components/schemas/User_Journeys_API_JourneyRewards"
              }
            }
          }
        ]
      },
      "User_Journeys_API_UserJourneyStarted": {
        "type": "object",
        "properties": {
          "user_journey": {
            "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
          },
          "first_step": {
            "$ref": "#/components/schemas/User_Journeys_API_CurrentStep"
          },
          "currency_deducted": {
            "type": "object",
            "nullable": true,
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "coins",
                  "gems"
                ]
              },
              "amount": {
                "type": "integer"
              }
            }
          }
        }
      },
      "User_Journeys_API_UserJourneyResumed": {
        "type": "object",
        "properties": {
          "user_journey": {
            "$ref": "#/components/schemas/User_Journeys_API_UserJourney"
          },
          "current_step": {
            "$ref": "#/components/schemas/User_Journeys_API_CurrentStep"
          },
          "streak_restored": {
            "type": "boolean"
          },
          "catch_up_required": {
            "type": "boolean"
          }
        }
      },
      "User_Journeys_API_CatchUpResult": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "catch_ups_remaining": {
            "type": "integer"
          },
          "streak_preserved": {
            "type": "boolean"
          },
          "current_streak": {
            "type": "integer"
          }
        }
      },
      "User_Journeys_API_JourneyRewards": {
        "type": "object",
        "properties": {
          "badge": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "image_url": {
                "type": "string"
              }
            }
          },
          "gems_earned": {
            "type": "integer"
          },
          "coins_earned": {
            "type": "integer"
          }
        }
      },
      "User_Journeys_API_UserStepSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User step ID (starts with `ustp_`)"
          },
          "step_id": {
            "type": "string"
          },
          "position": {
            "type": "integer"
          },
          "day_number": {
            "type": "integer",
            "nullable": true
          },
          "title": {
            "type": "string"
          },
          "subtitle": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/User_Journeys_API_UserStepStatus"
          },
          "is_milestone": {
            "type": "boolean"
          },
          "creates_deliverable": {
            "type": "boolean"
          },
          "completed_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "instance_number": {
            "type": "integer",
            "description": "For repeating template steps"
          }
        }
      },
      "User_Journeys_API_CurrentStep": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User step ID (starts with `ustp_`)"
          },
          "step_id": {
            "type": "string"
          },
          "position": {
            "type": "integer"
          },
          "day_number": {
            "type": "integer",
            "nullable": true
          },
          "week_number": {
            "type": "integer",
            "nullable": true
          },
          "title": {
            "type": "string"
          },
          "subtitle": {
            "type": "string",
            "nullable": true
          },
          "is_milestone": {
            "type": "boolean"
          },
          "creates_deliverable": {
            "type": "boolean"
          },
          "completion_rule": {
            "type": "string"
          },
          "blocks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User_Journeys_API_BlockForRender"
            }
          },
          "journey": {
            "type": "object",
            "properties": {
              "color_gradient": {
                "type": "string"
              },
              "bg_color": {
                "type": "string"
              },
              "companion_role": {
                "type": "string"
              },
              "companion_character": {
                "type": "string",
                "nullable": true
              }
            }
          }
        }
      },
      "User_Journeys_API_UserStepDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/User_Journeys_API_CurrentStep"
          },
          {
            "type": "object",
            "properties": {
              "status": {
                "$ref": "#/components/schemas/User_Journeys_API_UserStepStatus"
              },
              "started_at": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "completed_at": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "time_spent_seconds": {
                "type": "integer",
                "nullable": true
              },
              "companion_reaction": {
                "type": "string",
                "nullable": true
              },
              "responses": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/User_Journeys_API_BlockResponse"
                }
              }
            }
          }
        ]
      },
      "User_Journeys_API_BlockForRender": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Block ID (starts with `blk_`)"
          },
          "position": {
            "type": "integer"
          },
          "block_type": {
            "$ref": "#/components/schemas/User_Journeys_API_BlockType"
          },
          "content": {
            "type": "string",
            "nullable": true,
            "description": "For message/instruction blocks, may be randomized from variants"
          },
          "config": {
            "type": "object",
            "description": "Type-specific configuration"
          },
          "is_required": {
            "type": "boolean"
          }
        }
      },
      "User_Journeys_API_BlockResponse": {
        "type": "object",
        "properties": {
          "block_id": {
            "type": "string"
          },
          "block_type": {
            "$ref": "#/components/schemas/User_Journeys_API_BlockType"
          },
          "value": {
            "$ref": "#/components/schemas/User_Journeys_API_ResponseValue"
          },
          "metadata": {
            "type": "object",
            "properties": {
              "input_method": {
                "type": "string",
                "enum": [
                  "keyboard",
                  "voice",
                  "tap"
                ]
              },
              "time_to_complete": {
                "type": "integer",
                "description": "Seconds to complete this block"
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "User_Journeys_API_ResponseValue": {
        "type": "object",
        "description": "Structure varies by block type:\n- text_input: { text: string, word_count: number }\n- voice_input: { audio_url: string, duration_seconds: number, transcription?: string }\n- single_select: { selected_id: string, selected_value?: string }\n- multi_select: { selected_ids: string[] }\n- scale: { value: number }\n- binary: { value: boolean }\n- counter: { value: number, unit: string }\n- timer: { completed: boolean, actual_seconds: number, early_complete: boolean }\n- checklist: { checked_ids: string[], custom_items?: string[] }\n- media_upload: { file_url: string, file_type: string, file_size: number }\n- external_confirm: { confirmed: boolean, skipped: boolean }\n"
      },
      "User_Journeys_API_StepCompletionRequest": {
        "type": "object",
        "required": [
          "responses"
        ],
        "properties": {
          "responses": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "block_id",
                "value"
              ],
              "properties": {
                "block_id": {
                  "type": "string"
                },
                "value": {
                  "$ref": "#/components/schemas/User_Journeys_API_ResponseValue"
                },
                "metadata": {
                  "type": "object",
                  "properties": {
                    "input_method": {
                      "type": "string"
                    },
                    "time_to_complete": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "User_Journeys_API_StepCompletionResult": {
        "type": "object",
        "properties": {
          "step_completed": {
            "type": "boolean"
          },
          "companion_reaction": {
            "type": "object",
            "properties": {
              "message": {
                "type": "string"
              },
              "mode": {
                "type": "string"
              }
            }
          },
          "streak_update": {
            "type": "object",
            "properties": {
              "previous_streak": {
                "type": "integer"
              },
              "current_streak": {
                "type": "integer"
              },
              "is_new_record": {
                "type": "boolean"
              }
            }
          },
          "rewards": {
            "type": "object",
            "properties": {
              "gems_earned": {
                "type": "integer"
              },
              "coins_earned": {
                "type": "integer"
              },
              "badge_earned": {
                "type": "object",
                "nullable": true
              }
            }
          },
          "next_step": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "type": "string"
              },
              "title": {
                "type": "string"
              },
              "available_at": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              }
            }
          },
          "journey_completed": {
            "type": "boolean"
          },
          "journey_completion_rewards": {
            "$ref": "#/components/schemas/User_Journeys_API_JourneyRewards"
          },
          "deliverable_created": {
            "type": "object",
            "nullable": true,
            "properties": {
              "id": {
                "type": "string"
              },
              "title": {
                "type": "string"
              }
            }
          }
        }
      },
      "User_Journeys_API_DeliverableSummary": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Deliverable ID (starts with `dlv_`)"
          },
          "title": {
            "type": "string"
          },
          "content_type": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "is_pinned": {
            "type": "boolean"
          }
        }
      },
      "User_Journeys_API_Deliverable": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Deliverable ID (starts with `dlv_`)"
          },
          "user_journey_id": {
            "type": "string"
          },
          "user_step_id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string",
            "nullable": true
          },
          "content_type": {
            "type": "string"
          },
          "media_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "is_public": {
            "type": "boolean"
          },
          "is_pinned": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "journey": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "title": {
                "type": "string"
              }
            }
          },
          "step": {
            "type": "object",
            "properties": {
              "day_number": {
                "type": "integer",
                "nullable": true
              },
              "title": {
                "type": "string"
              }
            }
          }
        }
      },
      "User_Journeys_API_UserJourneyStats": {
        "type": "object",
        "properties": {
          "total_journeys_started": {
            "type": "integer"
          },
          "total_journeys_completed": {
            "type": "integer"
          },
          "total_steps_completed": {
            "type": "integer"
          },
          "total_deliverables_created": {
            "type": "integer"
          },
          "current_active_journeys": {
            "type": "integer"
          },
          "longest_streak_ever": {
            "type": "integer"
          },
          "total_time_spent_minutes": {
            "type": "integer"
          },
          "categories_explored": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "completion_rate": {
            "type": "number",
            "format": "float",
            "description": "Percentage of started journeys completed"
          }
        }
      },
      "User_Journeys_API_DeletedObject": {
        "type": "object",
        "required": [
          "id",
          "deleted"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "deleted": {
            "type": "boolean"
          }
        }
      },
      "User_Journeys_API_Error": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "object"
          }
        }
      },
      "User_Journeys_API_ValidationError": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "example": "validation_error"
          },
          "message": {
            "type": "string"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "field": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "User_Journeys_API_PaymentRequiredError": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "example": "insufficient_funds"
          },
          "message": {
            "type": "string"
          },
          "required": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "coins",
                  "gems",
                  "premium"
                ]
              },
              "amount": {
                "type": "integer"
              }
            }
          },
          "current": {
            "type": "object",
            "properties": {
              "coins": {
                "type": "integer"
              },
              "gems": {
                "type": "integer"
              }
            }
          }
        }
      },
      "Journeys_Content_API_JourneyCategory": {
        "type": "string",
        "enum": [
          "emotional",
          "fitness",
          "education",
          "professional",
          "fun",
          "habit"
        ]
      },
      "Journeys_Content_API_DurationType": {
        "type": "string",
        "enum": [
          "fixed",
          "variable",
          "ongoing"
        ]
      },
      "Journeys_Content_API_PriceType": {
        "type": "string",
        "enum": [
          "free",
          "coins",
          "gems",
          "premium"
        ]
      },
      "Journeys_Content_API_StreakSensitivity": {
        "type": "string",
        "enum": [
          "strict",
          "forgiving",
          "flexible"
        ]
      },
      "Journeys_Content_API_ReactionMode": {
        "type": "string",
        "enum": [
          "validating",
          "celebratory",
          "instructive",
          "playful",
          "analytical",
          "coaching",
          "minimal"
        ]
      },
      "Journeys_Content_API_CompletionRule": {
        "type": "string",
        "enum": [
          "all_required",
          "any_input",
          "timer_complete"
        ]
      },
      "Journeys_Content_API_BlockType": {
        "type": "string",
        "enum": [
          "companion_message",
          "instruction",
          "narrative",
          "text_input",
          "voice_input",
          "single_select",
          "multi_select",
          "scale",
          "binary",
          "counter",
          "timer",
          "checklist",
          "media_upload",
          "external_confirm"
        ]
      },
      "Journeys_Content_API_Journey": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Journey ID (starts with `jrn_`)"
          },
          "title": {
            "type": "string"
          },
          "tagline": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "category": {
            "$ref": "#/components/schemas/Journeys_Content_API_JourneyCategory"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "duration_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_DurationType"
          },
          "duration_display": {
            "type": "string",
            "example": "30 days"
          },
          "total_steps": {
            "type": "integer"
          },
          "frequency": {
            "type": "string",
            "example": "daily"
          },
          "session_minutes": {
            "type": "integer"
          },
          "companion_role": {
            "type": "string",
            "example": "Creative Cheerleader"
          },
          "companion_character": {
            "type": "string",
            "nullable": true
          },
          "streak_sensitivity": {
            "$ref": "#/components/schemas/Journeys_Content_API_StreakSensitivity"
          },
          "catch_up_days": {
            "type": "integer",
            "nullable": true
          },
          "price_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_PriceType"
          },
          "price_amount": {
            "type": "integer",
            "nullable": true
          },
          "cover_image_url": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "color_gradient": {
            "type": "string",
            "example": "from-violet-500 to-purple-600"
          },
          "bg_color": {
            "type": "string",
            "example": "bg-violet-50"
          },
          "completion_count": {
            "type": "integer"
          },
          "active_user_count": {
            "type": "integer"
          },
          "avg_rating": {
            "type": "number",
            "format": "float",
            "nullable": true
          },
          "is_published": {
            "type": "boolean"
          },
          "is_featured": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          },
          "published_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "Journeys_Content_API_JourneyWithRelations": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Journeys_Content_API_Journey"
          },
          {
            "type": "object",
            "properties": {
              "steps": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Journeys_Content_API_StepWithBlocks"
                }
              },
              "reaction_templates": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Journeys_Content_API_ReactionTemplate"
                }
              }
            }
          }
        ]
      },
      "Journeys_Content_API_JourneyCreate": {
        "type": "object",
        "required": [
          "title",
          "category",
          "duration_type"
        ],
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "tagline": {
            "type": "string",
            "maxLength": 200
          },
          "description": {
            "type": "string",
            "maxLength": 2000
          },
          "category": {
            "$ref": "#/components/schemas/Journeys_Content_API_JourneyCategory"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "duration_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_DurationType"
          },
          "duration_display": {
            "type": "string"
          },
          "frequency": {
            "type": "string"
          },
          "session_minutes": {
            "type": "integer",
            "minimum": 1
          },
          "companion_role": {
            "type": "string"
          },
          "companion_character": {
            "type": "string"
          },
          "streak_sensitivity": {
            "$ref": "#/components/schemas/Journeys_Content_API_StreakSensitivity"
          },
          "catch_up_days": {
            "type": "integer",
            "minimum": 0
          },
          "price_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_PriceType"
          },
          "price_amount": {
            "type": "integer",
            "minimum": 0
          },
          "cover_image_url": {
            "type": "string",
            "format": "uri"
          },
          "color_gradient": {
            "type": "string"
          },
          "bg_color": {
            "type": "string"
          }
        }
      },
      "Journeys_Content_API_JourneyUpdate": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "tagline": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "category": {
            "$ref": "#/components/schemas/Journeys_Content_API_JourneyCategory"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "duration_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_DurationType"
          },
          "duration_display": {
            "type": "string"
          },
          "frequency": {
            "type": "string"
          },
          "session_minutes": {
            "type": "integer"
          },
          "companion_role": {
            "type": "string"
          },
          "companion_character": {
            "type": "string"
          },
          "streak_sensitivity": {
            "$ref": "#/components/schemas/Journeys_Content_API_StreakSensitivity"
          },
          "catch_up_days": {
            "type": "integer"
          },
          "price_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_PriceType"
          },
          "price_amount": {
            "type": "integer"
          },
          "cover_image_url": {
            "type": "string",
            "format": "uri"
          },
          "color_gradient": {
            "type": "string"
          },
          "bg_color": {
            "type": "string"
          },
          "is_featured": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_Step": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Step ID (starts with `stp_`)"
          },
          "journey_id": {
            "type": "string"
          },
          "position": {
            "type": "integer"
          },
          "day_number": {
            "type": "integer",
            "nullable": true
          },
          "week_number": {
            "type": "integer",
            "nullable": true
          },
          "title": {
            "type": "string"
          },
          "subtitle": {
            "type": "string",
            "nullable": true
          },
          "is_milestone": {
            "type": "boolean"
          },
          "is_template": {
            "type": "boolean"
          },
          "creates_deliverable": {
            "type": "boolean"
          },
          "completion_rule": {
            "$ref": "#/components/schemas/Journeys_Content_API_CompletionRule"
          },
          "reaction_mode": {
            "$ref": "#/components/schemas/Journeys_Content_API_ReactionMode"
          },
          "reaction_prompt_override": {
            "type": "string",
            "nullable": true
          },
          "available_after_hours": {
            "type": "integer",
            "nullable": true
          },
          "expires_after_hours": {
            "type": "integer",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Journeys_Content_API_StepWithBlocks": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Journeys_Content_API_Step"
          },
          {
            "type": "object",
            "properties": {
              "blocks": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Journeys_Content_API_Block"
                }
              }
            }
          }
        ]
      },
      "Journeys_Content_API_StepCreate": {
        "type": "object",
        "required": [
          "title",
          "reaction_mode"
        ],
        "properties": {
          "position": {
            "type": "integer",
            "description": "If not provided, appends to end"
          },
          "day_number": {
            "type": "integer"
          },
          "week_number": {
            "type": "integer"
          },
          "title": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "subtitle": {
            "type": "string",
            "maxLength": 200
          },
          "is_milestone": {
            "type": "boolean",
            "default": false
          },
          "is_template": {
            "type": "boolean",
            "default": false
          },
          "creates_deliverable": {
            "type": "boolean",
            "default": false
          },
          "completion_rule": {
            "$ref": "#/components/schemas/Journeys_Content_API_CompletionRule"
          },
          "reaction_mode": {
            "$ref": "#/components/schemas/Journeys_Content_API_ReactionMode"
          },
          "reaction_prompt_override": {
            "type": "string"
          },
          "available_after_hours": {
            "type": "integer"
          },
          "expires_after_hours": {
            "type": "integer"
          }
        }
      },
      "Journeys_Content_API_StepUpdate": {
        "type": "object",
        "properties": {
          "day_number": {
            "type": "integer"
          },
          "week_number": {
            "type": "integer"
          },
          "title": {
            "type": "string"
          },
          "subtitle": {
            "type": "string"
          },
          "is_milestone": {
            "type": "boolean"
          },
          "is_template": {
            "type": "boolean"
          },
          "creates_deliverable": {
            "type": "boolean"
          },
          "completion_rule": {
            "$ref": "#/components/schemas/Journeys_Content_API_CompletionRule"
          },
          "reaction_mode": {
            "$ref": "#/components/schemas/Journeys_Content_API_ReactionMode"
          },
          "reaction_prompt_override": {
            "type": "string"
          },
          "available_after_hours": {
            "type": "integer"
          },
          "expires_after_hours": {
            "type": "integer"
          }
        }
      },
      "Journeys_Content_API_Block": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Block ID (starts with `blk_`)"
          },
          "step_id": {
            "type": "string"
          },
          "position": {
            "type": "integer"
          },
          "block_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_BlockType"
          },
          "content": {
            "type": "string",
            "nullable": true
          },
          "content_variants": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          },
          "config": {
            "$ref": "#/components/schemas/Journeys_Content_API_BlockConfig"
          },
          "is_required": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Journeys_Content_API_BlockCreate": {
        "type": "object",
        "required": [
          "block_type"
        ],
        "properties": {
          "position": {
            "type": "integer"
          },
          "block_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_BlockType"
          },
          "content": {
            "type": "string"
          },
          "content_variants": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "config": {
            "$ref": "#/components/schemas/Journeys_Content_API_BlockConfig"
          },
          "is_required": {
            "type": "boolean",
            "default": true
          }
        }
      },
      "Journeys_Content_API_BlockUpdate": {
        "type": "object",
        "properties": {
          "block_type": {
            "$ref": "#/components/schemas/Journeys_Content_API_BlockType"
          },
          "content": {
            "type": "string"
          },
          "content_variants": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "config": {
            "$ref": "#/components/schemas/Journeys_Content_API_BlockConfig"
          },
          "is_required": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_BlockConfig": {
        "type": "object",
        "description": "Configuration varies by block type. See specific config schemas.\n",
        "oneOf": [
          {
            "$ref": "#/components/schemas/Journeys_Content_API_TextInputConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_VoiceInputConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_SingleSelectConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_MultiSelectConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_ScaleConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_BinaryConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_CounterConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_TimerConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_ChecklistConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_MediaUploadConfig"
          },
          {
            "$ref": "#/components/schemas/Journeys_Content_API_ExternalConfirmConfig"
          },
          {
            "type": "object",
            "description": "Empty config for message blocks"
          }
        ]
      },
      "Journeys_Content_API_TextInputConfig": {
        "type": "object",
        "properties": {
          "placeholder": {
            "type": "string"
          },
          "min_length": {
            "type": "integer"
          },
          "max_length": {
            "type": "integer"
          },
          "input_style": {
            "type": "string",
            "enum": [
              "short",
              "long"
            ]
          },
          "allow_voice": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_VoiceInputConfig": {
        "type": "object",
        "properties": {
          "max_duration_seconds": {
            "type": "integer"
          },
          "min_duration_seconds": {
            "type": "integer"
          },
          "transcription_enabled": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_SingleSelectConfig": {
        "type": "object",
        "required": [
          "options"
        ],
        "properties": {
          "options": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "id",
                "label"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                },
                "value": {
                  "type": "string"
                },
                "image_url": {
                  "type": "string",
                  "format": "uri"
                }
              }
            }
          },
          "display": {
            "type": "string",
            "enum": [
              "list",
              "grid",
              "cards"
            ]
          },
          "shuffle": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_MultiSelectConfig": {
        "type": "object",
        "required": [
          "options"
        ],
        "properties": {
          "options": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "id",
                "label"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                },
                "value": {
                  "type": "string"
                }
              }
            }
          },
          "min_selections": {
            "type": "integer"
          },
          "max_selections": {
            "type": "integer"
          }
        }
      },
      "Journeys_Content_API_ScaleConfig": {
        "type": "object",
        "required": [
          "min",
          "max",
          "display"
        ],
        "properties": {
          "min": {
            "type": "integer"
          },
          "max": {
            "type": "integer"
          },
          "step": {
            "type": "integer"
          },
          "display": {
            "type": "string",
            "enum": [
              "numeric",
              "emoji",
              "labels"
            ]
          },
          "emoji_set": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "label_min": {
            "type": "string"
          },
          "label_max": {
            "type": "string"
          }
        }
      },
      "Journeys_Content_API_BinaryConfig": {
        "type": "object",
        "required": [
          "yes_label",
          "no_label"
        ],
        "properties": {
          "yes_label": {
            "type": "string"
          },
          "no_label": {
            "type": "string"
          },
          "yes_value": {
            "type": "string"
          },
          "no_value": {
            "type": "string"
          }
        }
      },
      "Journeys_Content_API_CounterConfig": {
        "type": "object",
        "required": [
          "label",
          "unit",
          "min",
          "max",
          "step"
        ],
        "properties": {
          "label": {
            "type": "string"
          },
          "unit": {
            "type": "string"
          },
          "min": {
            "type": "number"
          },
          "max": {
            "type": "number"
          },
          "step": {
            "type": "number"
          },
          "default_value": {
            "type": "number"
          }
        }
      },
      "Journeys_Content_API_TimerConfig": {
        "type": "object",
        "required": [
          "total_seconds"
        ],
        "properties": {
          "total_seconds": {
            "type": "integer"
          },
          "intervals": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "label",
                "seconds"
              ],
              "properties": {
                "label": {
                  "type": "string"
                },
                "seconds": {
                  "type": "integer"
                },
                "type": {
                  "type": "string"
                }
              }
            }
          },
          "allow_pause": {
            "type": "boolean"
          },
          "allow_early_complete": {
            "type": "boolean"
          },
          "audio_url": {
            "type": "string",
            "format": "uri"
          }
        }
      },
      "Journeys_Content_API_ChecklistConfig": {
        "type": "object",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "id",
                "label"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                },
                "required": {
                  "type": "boolean"
                }
              }
            }
          },
          "allow_custom": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_MediaUploadConfig": {
        "type": "object",
        "properties": {
          "accepted_types": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "max_size_bytes": {
            "type": "integer"
          },
          "multiple": {
            "type": "boolean"
          },
          "camera_enabled": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_ExternalConfirmConfig": {
        "type": "object",
        "required": [
          "action_description",
          "confirm_label"
        ],
        "properties": {
          "action_description": {
            "type": "string"
          },
          "confirm_label": {
            "type": "string"
          },
          "skip_label": {
            "type": "string"
          },
          "allow_skip": {
            "type": "boolean"
          },
          "require_proof": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_ReactionTemplate": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Reaction template ID (starts with `rxt_`)"
          },
          "journey_id": {
            "type": "string"
          },
          "mode": {
            "$ref": "#/components/schemas/Journeys_Content_API_ReactionMode"
          },
          "prompt_template": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Journeys_Content_API_ReactionTemplateCreate": {
        "type": "object",
        "required": [
          "mode",
          "prompt_template"
        ],
        "properties": {
          "mode": {
            "$ref": "#/components/schemas/Journeys_Content_API_ReactionMode"
          },
          "prompt_template": {
            "type": "string",
            "minLength": 1,
            "maxLength": 5000
          }
        }
      },
      "Journeys_Content_API_DeletedObject": {
        "type": "object",
        "required": [
          "id",
          "deleted"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "deleted": {
            "type": "boolean"
          }
        }
      },
      "Journeys_Content_API_Error": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "object"
          }
        }
      }
    },
    "responses": {
      "Spike_API_Unauthorized": {
        "description": "Invalid or missing API key",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Spike_API_Error"
            }
          }
        }
      },
      "Spike_API_BadRequest": {
        "description": "Invalid request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Spike_API_Error"
            }
          }
        }
      },
      "Spike_API_NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Spike_API_Error"
            }
          }
        }
      },
      "User_Journeys_API_BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/User_Journeys_API_Error"
            }
          }
        }
      },
      "User_Journeys_API_Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/User_Journeys_API_Error"
            }
          }
        }
      },
      "User_Journeys_API_NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/User_Journeys_API_Error"
            }
          }
        }
      },
      "Journeys_Content_API_BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Journeys_Content_API_Error"
            }
          }
        }
      },
      "Journeys_Content_API_Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Journeys_Content_API_Error"
            }
          }
        }
      },
      "Journeys_Content_API_NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Journeys_Content_API_Error"
            }
          }
        }
      }
    }
  },
  "x-tagGroups": [
    {
      "name": "Spike API",
      "tags": [
        "API Keys",
        "Personalities",
        "Users",
        "Memories",
        "Chat",
        "Voice",
        "Video",
        "Image",
        "Knowledge",
        "Conversations",
        "Games",
        "Integrations"
      ]
    },
    {
      "name": "User Journeys API",
      "tags": [
        "Journey Marketplace",
        "User Journeys",
        "User Journey Steps",
        "User Journey Deliverables"
      ]
    },
    {
      "name": "Journeys Content API",
      "tags": [
        "Journeys",
        "Journey Steps",
        "Journey Blocks",
        "Journey Reaction Templates"
      ]
    }
  ]
}